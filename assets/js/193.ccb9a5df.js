(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{588:function(e,t,s){"use strict";s.r(t);var a=s(50),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"setup-electrumx-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup-electrumx-server"}},[e._v("#")]),e._v(" Setup ElectrumX Server")]),e._v(" "),s("p",[e._v("Here are the steps required to run electrumx for KMD. Replace the variables according to your setup. You need to setup minimum 2 electrum servers for same coin to ensure stable operation.")]),e._v(" "),s("p",[e._v("Refer to the docs at "),s("a",{attrs:{href:"https://electrumx.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://electrumx.readthedocs.io/en/latest/"),s("OutboundLink")],1),e._v(" for more info.")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("<username>")]),e._v(" is the username under which electrumx will run")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("$rpcuser")]),e._v(" and "),s("code",[e._v("$rpcpass")]),e._v(" are from the conf of the wallet daemon")])])]),e._v(" "),s("h2",{attrs:{id:"general-part"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#general-part"}},[e._v("#")]),e._v(" General part")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" python3-setuptools python3-multidict python3.8 libleveldb-dev\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /home/"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("username"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/KomodoPlatform/electrumx-1\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" electrumx-1\npip3 "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\npip3 "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" ."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("uvloop,ujson"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("h2",{attrs:{id:"coin-specific-part"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#coin-specific-part"}},[e._v("#")]),e._v(" Coin specific part")]),e._v(" "),s("p",[e._v("If you are launching the electrum server for a new smartchain, you will have to add it to the "),s("code",[e._v("electrumx-1/electrumx/lib/coins.py")]),e._v(" file")]),e._v(" "),s("p",[e._v("For example:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class Rick(KomodoMixin, EquihashMixin, Coin):\n    NAME = "Rick"\n    SHORTNAME = "RICK"\n    NET = "mainnet"\n    TX_COUNT = 693629\n    TX_COUNT_HEIGHT = 491777\n    TX_PER_BLOCK = 2\n    RPC_PORT = 25435\n    REORG_LIMIT = 800\n    PEERS = []\n')])])]),s("p",[e._v("NAME,SHORTNAME and RPC_PORT are to be changed accordingly.")]),e._v(" "),s("p",[e._v("Change references of KMD to your coin where applicable.")]),e._v(" "),s("p",[e._v("Run:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" contrib/systemd/electrumx.service /etc/systemd/system/electrumx_KMD.service\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" /etc/systemd/system/electrumx_KMD.service\n")])])]),s("p",[e._v("Fill the following contents into the file:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Description=Electrumx_KMD\nEnvironmentFile=/etc/electrumx_KMD.conf\nExecStart=/home/<username>/electrumx-1/electrumx_server\nUser=<username>\n")])])]),s("p",[e._v("Run:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" -p /electrumdb/KMD\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chown")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("username"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" /electrumdb/KMD\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" /etc/electrumx_KMD.conf\n")])])]),s("p",[e._v("Fill the following contents into the file:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("COIN = Komodo\nDB_DIRECTORY = /electrumdb/KMD\nDAEMON_URL = http://$rpcuser:$rpcpass@127.0.0.1:<rpcport>/\nSERVICES = tcp://:10001,rpc://:8001\nEVENT_LOOP_POLICY = uvloop\nPEER_DISCOVERY = self\nINITIAL_CONCURRENT = 50\nCOST_SOFT_LIMIT = 10000\nCOST_HARD_LIMIT = 100000\nBANDWIDTH_UNIT_COST = 10000\n")])])]),s("p",[e._v("You can find rpcuser,rpcpass and rpcport in the conf file of the smartchain located at .komodo/coin_name/coin_name.conf")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl start electrumx_KMD\n")])])]),s("p",[e._v("To check its status, execute the following command")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl status electrumx_KMD\n")])])]),s("p",[e._v("To issue commands to the electrum server from a local terminal use")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('echo \'{"method":"blockchain.transaction.get","params":["bcded351e33d530a07deebeeee3b7ae328e9636e3cfab72eadace6bb6945e693", true],"id":"test"}\' | nc electrum1.cipig.net 10031 -i 1 | jq .\n')])])]),s("ul",[s("li",[e._v("change the method and params as needed")]),e._v(" "),s("li",[e._v("replace "),s("code",[e._v("electrum1.cipig.net")]),e._v(" with the IP address or domain of the electrum server")]),e._v(" "),s("li",[e._v("10031 with tcp port set in the conf file")])])])}),[],!1,null,null,null);t.default=n.exports}}]);